"use strict";(self.webpackChunkscoolzee=self.webpackChunkscoolzee||[]).push([[2716],{9726:function(e,n,t){t.d(n,{Z:function(){return p}});var i=t(2791),o=t(8302),r=t(3712),a=t(1971),d=t(6869),l=t(1889),s=t(4942),c=(0,t(8596).Z)((function(e){return{label:(0,s.Z)({fontSize:"1rem",fontFamily:["Roboto","Helvetica","Arial","sans-serif"],fontWeight:"400",lineHeight:"1.5",letterSpacing:"0.00938em",color:e.palette.grey[700],"& .MuiTypography-body1":{fontSize:"1.3rem !important"}},e.breakpoints.down("sm"),{fontSize:"1rem !important",padding:"7px 10px 0px 7px","& .MuiTypography-body1":{fontSize:"1rem !important"}}),header:{backgroundColor:"#101F33",padding:"5px",color:e.palette.common.white,marginTop:"10px",marginBottom:"10px"}}})),u=t(184),p=function(e){var n,t,s,p,m=c(),f=function(e){var n=e.getDate(),t=e.getMonth()+1,i=e.getFullYear(),o=e.getHours(),r=e.getMinutes(),a=o>=12?"pm":"am";return n+"/"+t+"/"+i+","+(o=(o%=12)||12)+":"+(r=r<10?"0"+r:r)+" "+a};return(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)(o.Z,{className:m.header,children:"Audit Info :"}),(0,u.jsx)(r.Z,{style:{paddingTop:30,backgroundColor:"white"},children:(0,u.jsxs)(l.ZP,{container:!0,spacing:4,children:[(0,u.jsx)(l.ZP,{item:!0,xs:6,style:{paddingTop:0},children:(0,u.jsxs)(a.Z,{style:{marginBottom:20},children:[(0,u.jsx)(o.Z,{className:m.label,children:"Created By :"}),(0,u.jsx)(d.Z,{style:{flex:1},fullWidth:!0,InputProps:{readOnly:!0,disableUnderline:!0},value:"".concat(null===e||void 0===e||null===(n=e.record)||void 0===n||null===(t=n.createdBy)||void 0===t?void 0:t.name," ").concat(f(new Date(e.record.createdAt)))||"",id:"last-modified-by",variant:"standard"})]})}),(0,u.jsx)(l.ZP,{item:!0,xs:6,style:{paddingTop:0},children:(0,u.jsxs)(a.Z,{style:{marginBottom:20},children:[(0,u.jsx)(o.Z,{className:m.label,children:"Last Modified By :"}),(0,u.jsx)(d.Z,{style:{flex:1},fullWidth:!0,InputProps:{readOnly:!0,disableUnderline:!0},value:"".concat(null===e||void 0===e||null===(s=e.record)||void 0===s||null===(p=s.modifiedBy)||void 0===p?void 0:p.name," ").concat(f(new Date(e.record.updatedAt)))||"",id:"last-modified-by",variant:"standard"})]})})]})})]})}},2716:function(e,n,t){t.r(n);var i=t(2982),o=t(1413),r=t(4165),a=t(5861),d=t(885),l=t(2791),s=t(1971),c=t(1288),u=t(6513),p=t(8302),m=t(3712),f=t(9526),h=t(9836),g=t(3382),Z=t(8745),x=t(9281),v=t(6890),y=t(5855),j=t(4245),b=t(4919),S=t(1428),k=t(7848),M=t(6538),w=t(6140),C=t(1038),z=t(9271),E=t(4569),P=t.n(E),D=t(4280),T=t(9726),W=t(184);n.default=function(e){var n,t,E,B=(0,C.yK)(),F=(0,z.k6)(),I=j.parse(window.location.search),R=!1,N=(0,l.useState)({}),A=(0,d.Z)(N,2),H=A[0],L=A[1],q=(0,l.useState)(0),O=(0,d.Z)(q,2),K=O[0],U=O[1],V=l.useState([]),J=(0,d.Z)(V,2),Y=J[0],$=J[1];(0,l.useEffect)((function(){G()}),[]),(0,l.useEffect)((function(){var e;(null===(e=H.details)||void 0===e?void 0:e.length)>0&&Q()}),[H.details]);var G=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R=!1,n=P().CancelToken.source(),e.next=4,P().get("".concat("http://localhost:8000/web","/get-fee-structure-by-id/").concat(I.feeId)).then((function(e){console.log(e.data),L(e.data)})).catch((function(e){R||403===e.request.status&&(localStorage.removeItem("userDetail"),localStorage.removeItem("userToken"),localStorage.removeItem("activeSubscription"),F.replace("/login"),F.go(0))})).finally((function(){return function(){R=!0,n.cancel("Cancelling in cleanup")}}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e,n;n=null===(e=H.details)||void 0===e?void 0:e.map((function(e){return e.amount})).reduce((function(e,n){return parseFloat(e)+parseFloat(n)})),U(n)},X=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_()){e.next=2;break}return e.abrupt("return");case 2:return t=(0,o.Z)((0,o.Z)({},H),{},{name:H.name,details:null===(n=H.details)||void 0===n?void 0:n.map((function(e){return{description:e.description,amount:e.amount}}))}),R=!1,i=P().CancelToken.source(),e.next=7,P().post("".concat("http://localhost:8000/web","/update-fee-structure-by-id"),{updatedFeeData:t}).then((function(e){w.ZP.success("Saved!!"),F.goBack()})).catch((function(e){R||(403===e.request.status&&(localStorage.removeItem("userDetail"),localStorage.removeItem("userToken"),localStorage.removeItem("activeSubscription"),F.replace("/login"),F.go(0)),400===e.request.status&&w.ZP.error("Something went wtong! Please try again..."))})).finally((function(){return function(){R=!0,i.cancel("Cancelling in cleanup")}}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=[],n=!0;return""===H.name&&(e.push("name"),n=!1),n||$([].concat(e)),n};return(0,W.jsxs)(l.Fragment,{children:["Admin"===(null===(n=JSON.parse(localStorage.getItem("userDetail")))||void 0===n||null===(t=n.profile)||void 0===t?void 0:t.name)?(0,W.jsx)(s.Z,{component:"span",className:B.hideButtons,children:(0,W.jsxs)(c.Z,{justifyContent:"space-between",container:!0,spacing:1,children:[(0,W.jsx)(c.Z,{item:!0,xs:6,md:6,style:{paddingRight:4,justifyContent:"flex-end"},className:B.gridElement,children:(0,W.jsx)(u.Z,{variant:"contained",size:"medium",onClick:function(){X()},children:"Save"})}),(0,W.jsx)(c.Z,{item:!0,xs:6,md:6,style:{paddingLeft:4},className:B.gridElement,children:(0,W.jsx)(u.Z,{variant:"contained",size:"medium",onClick:function(){F.goBack()},children:"Cancel"})})]})}):(0,W.jsx)("span",{}),(0,W.jsx)(p.Z,{className:B.header,children:"Fee Structure :"}),(0,W.jsx)(m.Z,{style:{paddingTop:30,backgroundColor:"white"},children:(0,W.jsx)(c.Z,{container:!0,spacing:4,children:(0,W.jsx)(c.Z,{item:!0,xs:6,children:(0,W.jsxs)(s.Z,{style:{marginBottom:20},children:[(0,W.jsx)(p.Z,{className:B.label,children:"Name :"}),(0,W.jsx)(D.Z,{style:{flex:1},fullWidth:!0,inputProps:{className:B.inputDesign},placeholder:"Fee Structure Name",helperText:Y.includes("name")?"Name is required":"",error:Y.includes("name"),onFocus:function(){},value:H.name,id:"name",onChange:function(e){L((0,o.Z)((0,o.Z)({},H),{},{name:e.target.value}))},variant:"standard"})]})})})}),(0,W.jsx)(x.Z,{component:f.Z,children:(0,W.jsxs)(h.Z,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[(0,W.jsx)(v.Z,{children:(0,W.jsxs)(y.Z,{children:[(0,W.jsx)(Z.Z,{style:{fontWeight:"bold"},children:"Description"}),(0,W.jsx)(Z.Z,{align:"right",style:{fontWeight:"bold"},children:"Amount"}),(0,W.jsx)(Z.Z,{align:"center",style:{fontWeight:"bold"},children:"Actions"})]})}),(0,W.jsxs)(g.Z,{children:[null===H||void 0===H||null===(E=H.details)||void 0===E?void 0:E.map((function(e,n){var t,r;return(0,W.jsxs)(y.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,W.jsxs)(Z.Z,{component:"th",scope:"row",children:[!e.isEditMode&&(0,W.jsx)("span",{children:e.description}),e.isEditMode&&(0,W.jsx)(D.Z,{fullWidth:!0,id:"row.description",value:e.description,onChange:function(e){!function(e,n){var t=(0,i.Z)(H.details);t[e].description=n,L((0,o.Z)((0,o.Z)({},H),{},{details:t}))}(n,e.target.value)}})]}),(0,W.jsxs)(Z.Z,{align:"right",children:[!e.isEditMode&&(0,W.jsx)("span",{children:e.amount}),e.isEditMode&&(0,W.jsx)(D.Z,{fullWidth:!0,id:"row.description",inputMode:"numeric",value:e.amount,onChange:function(e){!function(e,n){if(""===n||/^[+-]?\d*(?:[.,]\d*)?$/.test(n)){var t=(0,i.Z)(H.details);t[e].amount=n.replace(/^0+/,"")||0,L((0,o.Z)((0,o.Z)({},H),{},{details:t}))}}(n,e.target.value)}})]}),(0,W.jsxs)(Z.Z,{align:"center",children:[!e.isEditMode&&(0,W.jsx)("span",{style:{paddingRight:3},children:(0,W.jsx)(b.Z,{onClick:function(n){!function(e){var n=H.details,t=n.find((function(e){return!0===e.isEditMode}));""===(null===t||void 0===t?void 0:t.description)?w.ZP.error("Description can not be empty"):""!==(n.find((function(e){return e.description===(null===t||void 0===t?void 0:t.description)&&!1===e.isEditMode}))||"")?w.ZP.error("Duplicate description"):(n.map((function(e){return e.isEditMode=!1})),n.find((function(n){return n.description===e.description})).isEditMode=!0,L((0,o.Z)((0,o.Z)({},H),{},{details:n})),Q())}(e)}})}),e.isEditMode&&(0,W.jsx)("span",{style:{paddingRight:3},children:(0,W.jsx)(S.Z,{style:{paddingRight:2},onClick:function(){!function(e,n){var t=H.details;""!==(t.find((function(e){return e.description===n.description&&!1===e.isEditMode}))||"")?w.ZP.error("Duplicate description"):""===n.description?w.ZP.error("Description can not be empty"):(t[e].isEditMode=!1,L((0,o.Z)((0,o.Z)({},H),{},{details:t})),Q())}(n,e)}})}),(0,W.jsx)("span",{style:{paddingRight:3},children:(0,W.jsx)(M.Z,{onClick:function(){!function(e){console.log(e);var n=H.details;null===n||void 0===n||n.splice(e,1),console.log(n),L((0,o.Z)((0,o.Z)({},H),{},{details:n}))}(n)},style:{paddingRight:2}})}),(null===(t=H.details)||void 0===t?void 0:t.findIndex((function(n){return n.description===e.description})))===(null===(r=H.details)||void 0===r?void 0:r.length)-1&&(0,W.jsx)("span",{style:{paddingRight:3},children:(0,W.jsx)(k.Z,{onClick:function(){!function(){var e=H.details,n=e.find((function(e){return!0===e.isEditMode}));""===(null===n||void 0===n?void 0:n.description)?w.ZP.error("Description can not be empty"):""!==(e.find((function(e){return e.description===(null===n||void 0===n?void 0:n.description)&&!1===e.isEditMode}))||"")?w.ZP.error("Duplicate description"):(e.map((function(e){return e.isEditMode=!1})),e.push({description:"",amount:0,isEditMode:!0}),L((0,o.Z)((0,o.Z)({},H),{},{details:e})))}()},style:{paddingRight:2}})})]})]},n)})),(0,W.jsxs)(y.Z,{children:[(0,W.jsx)(Z.Z,{component:"th",scope:"row",style:{fontWeight:"bold"},children:"Total"}),(0,W.jsx)(Z.Z,{align:"right",style:{fontWeight:"bold"},children:K})]})]})]})}),(0,W.jsx)(T.Z,{record:H}),(0,W.jsx)(w.x7,{})]})}},1038:function(e,n,t){t.d(n,{yK:function(){return l}});var i=t(4942),o=t(8596),r=t(7630),a=t(8745),d=t(618),l=(0,o.Z)((function(e){return{gridElement:(0,i.Z)({margin:"15px 0px",display:"flex",width:"100%"},e.breakpoints.down("sm"),{padding:"0px 0px 15px 0px !important",margin:0}),hideButtons:(0,i.Z)({},e.breakpoints.down("sm"),{display:"none"}),header:{backgroundColor:"#101F33",padding:"5px",color:e.palette.common.white,marginTop:"10px"},label:(0,i.Z)({fontSize:"1rem",fontFamily:["Roboto","Helvetica","Arial","sans-serif"],fontWeight:"400",lineHeight:"1.5",letterSpacing:"0.00938em",color:e.palette.grey[700],"& .MuiTypography-body1":{fontSize:"1.3rem !important"}},e.breakpoints.down("sm"),{fontSize:"1rem !important",padding:"7px 10px 0px 7px","& .MuiTypography-body1":{fontSize:"1rem !important"}}),inputDesign:(0,i.Z)({fontSize:"1rem",fontFamily:["Roboto","Helvetica","Arial","sans-serif"],fontWeight:"400",lineHeight:"1.5",letterSpacing:"0.00938em","& .MuiInputBase-input":{padding:"3px 6px 7px;"}},e.breakpoints.down("sm"),{padding:"5px 10px 0px 7px","& .MuiInputBase-input":{padding:"6px 0 7px"}})}}));(0,r.ZP)(a.Z)((function(e){var n,t=e.theme;return n={},(0,i.Z)(n,"&.".concat(d.Z.head),{backgroundColor:"#e9e9e9",color:t.palette.common.black,fontWeight:800}),(0,i.Z)(n,"&.".concat(d.Z.body),{fontSize:14}),n})),(0,r.ZP)(a.Z)((function(e){var n,t=e.theme;return n={},(0,i.Z)(n,"&.".concat(d.Z.head),{backgroundColor:"#e9e9e9",padding:"0px",fontWeight:800,color:t.palette.common.black}),(0,i.Z)(n,"&.".concat(d.Z.body),{fontSize:14}),n}))},7848:function(e,n,t){var i=t(5318);n.Z=void 0;var o=i(t(5649)),r=t(184),a=(0,o.default)((0,r.jsx)("path",{d:"M12 7c-.55 0-1 .45-1 1v3H8c-.55 0-1 .45-1 1s.45 1 1 1h3v3c0 .55.45 1 1 1s1-.45 1-1v-3h3c.55 0 1-.45 1-1s-.45-1-1-1h-3V8c0-.55-.45-1-1-1zm0-5C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"ControlPointRounded");n.Z=a},1428:function(e,n,t){var i=t(5318);n.Z=void 0;var o=i(t(5649)),r=t(184),a=(0,o.default)((0,r.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done");n.Z=a},4919:function(e,n,t){var i=t(5318);n.Z=void 0;var o=i(t(5649)),r=t(184),a=(0,o.default)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"ModeEdit");n.Z=a},6538:function(e,n,t){var i=t(5318);n.Z=void 0;var o=i(t(5649)),r=t(184),a=(0,o.default)((0,r.jsx)("path",{d:"M7 12c0 .55.45 1 1 1h8c.55 0 1-.45 1-1s-.45-1-1-1H8c-.55 0-1 .45-1 1zm5-10C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"RemoveCircleOutlineRounded");n.Z=a}}]);
//# sourceMappingURL=2716.05d6ec35.chunk.js.map