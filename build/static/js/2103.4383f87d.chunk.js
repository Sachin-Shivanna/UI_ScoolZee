"use strict";(self.webpackChunkscoolzee=self.webpackChunkscoolzee||[]).push([[2103],{2103:function(e,n,i){i.r(n),i.d(n,{default:function(){return E}});var s=i(1413),a=i(4165),t=i(5861),r=i(885),l=i(1971),d=i(1288),o=i(6513),c=i(8302),u=i(3712),p=i(6869),m=i(5247),h=i(1859),x=i(3594),f=i(5159),v=i(4026),g=i(6169),Z=i(269),j=i(4569),y=i.n(j),b=i(7482),C=i(6140),N=i(2791),S=i(1523),k=i(9271),I=i(5048),w=i(4942),P=(0,i(8596).Z)((function(e){return{gridElement:(0,w.Z)({margin:"15px 0px",display:"flex",padding:"0px 20px 0px 0px"},e.breakpoints.down("sm"),{padding:"0px 0px 15px 0px !important",margin:0}),hideButtons:(0,w.Z)({},e.breakpoints.down("sm"),{display:"none"}),header:{backgroundColor:"#101F33",padding:"5px",color:e.palette.common.white,marginTop:"10px"},profileSelect:{"& .MuiMenu-paper":{top:"46% !important"}},checkboxDesign:{padding:0,"& .MuiCheckbox-root":{padding:"0PX !important"}},addressLine:(0,w.Z)({},e.breakpoints.down("xs"),{width:"50%"}),inputDesign:(0,w.Z)({fontSize:"1rem",fontFamily:["Roboto","Helvetica","Arial","sans-serif"],fontWeight:"400",lineHeight:"1.5",letterSpacing:"0.00938em","& .MuiInputBase-input":{padding:"3px 6px 7px;"}},e.breakpoints.down("sm"),{padding:"5px 10px 0px 7px","& .MuiInputBase-input":{padding:"6px 0 7px"}}),grid:(0,w.Z)({flex:1,flexDirection:"row"},e.breakpoints.down("sm"),{flexDirection:"column",padding:"10px"}),label:(0,w.Z)({fontSize:"1rem",fontFamily:["Roboto","Helvetica","Arial","sans-serif"],fontWeight:"400",lineHeight:"1.5",letterSpacing:"0.00938em",color:e.palette.grey[700],"& .MuiTypography-body1":{fontSize:"1.3rem !important"}},e.breakpoints.down("sm"),{fontSize:"1rem !important",padding:"7px 10px 0px 7px","& .MuiTypography-body1":{fontSize:"1rem !important"}})}})),D=i(184),E=function(e){var n=P(),i=(0,k.k6)(),j=(0,k.UO)().id,w=!1,E=N.useState(!1),L=(0,r.Z)(E,2),T=L[0],O=L[1],U=N.useState(!1),q=(0,r.Z)(U,2),z=q[0],F=q[1],A=N.useState(!1),_=(0,r.Z)(A,2),M=_[0],B=_[1],R=N.useState([]),H=(0,r.Z)(R,2),W=H[0],J=H[1],V=N.useState({}),X=(0,r.Z)(V,2),G=X[0],K=X[1],Q=N.useState([]),Y=(0,r.Z)(Q,2),$=Y[0],ee=Y[1],ne=N.useState(!1),ie=(0,r.Z)(ne,2),se=ie[0],ae=ie[1],te=N.useState(!1),re=(0,r.Z)(te,2),le=re[0],de=re[1],oe=N.useState(!1),ce=(0,r.Z)(oe,2),ue=ce[0],pe=ce[1],me=N.useState(""),he=(0,r.Z)(me,2),xe=he[0],fe=he[1],ve=N.useState(!1),ge=(0,r.Z)(ve,2);ge[0],ge[1];j||(j=e.userId),(0,N.useEffect)((function(){Ee()}),[]);var Ze,je,ye,be,Ce,Ne,Se,ke,Ie,we,Pe,De,Ee=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),ee([]),w=!1,n=y().CancelToken.source(),e.next=6,y().get("".concat("http://localhost:8000/web","/user-details/").concat(j)).then((function(e){var n,i,s,a;console.log(e.data),K(null===(n=e.data)||void 0===n?void 0:n.user),ee(null===(i=e.data)||void 0===i?void 0:i.profiles),fe(null===(s=e.data)||void 0===s||null===(a=s.user)||void 0===a?void 0:a.email)})).catch((function(e){w||403===e.request.status&&(localStorage.removeItem("userDetail"),localStorage.removeItem("userToken"),localStorage.removeItem("activeSubscription"),i.replace("/login"),i.go(0)),F(!0)})).finally((function(){return O(!1),function(){w=!0,n.cancel("Cancelling in cleanup")}}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e,n,i,s,a,t,r,l=!0,d=[];G.name||(d.push("name"),l=!1),G.phone1||(d.push("phone"),l=!1),/[a-zA-Z]/g.test(G.phone1)&&(d.push("phoneInvalid"),l=!1),10!==(null===(e=G.phone1)||void 0===e?void 0:e.length)&&(d.push("phoneInvalid"),l=!1),G.email||(d.push("email"),l=!1),G.email.match(/\S+@\S+\.\S+/)||(d.push("emailInvalid"),l=!1),null!==(n=G.address)&&void 0!==n&&n.addressLine1||(d.push("addrLine1"),l=!1),null!==(i=G.address)&&void 0!==i&&i.city||(d.push("city"),l=!1),null!==(s=G.address)&&void 0!==s&&s.district||(d.push("district"),l=!1),null!==(a=G.address)&&void 0!==a&&a.state||(d.push("state"),l=!1),null!==(t=G.address)&&void 0!==t&&t.country||(d.push("country"),l=!1),null!==(r=G.address)&&void 0!==r&&r.zipCode||(d.push("pinCode"),l=!1),l?xe!==G.email?pe(!0):Te():J(d)},Te=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe(!1),O(!0),w=!1,n=y().CancelToken.source(),e.next=6,y().post("".concat("http://localhost:8000/web","/user-details-update"),{userDetail:G}).then((function(e){200===e.status?B(!1):C.ZP.error(e.error)})).catch((function(e){w||(403===e.request.status?(localStorage.removeItem("userDetail"),localStorage.removeItem("userToken"),localStorage.removeItem("activeSubscription"),i.replace("/login"),i.go(0)):console.log(e.request)),F(!0)})).finally((function(){return O(!1),function(){w=!0,n.cancel("Cancelling in cleanup")}}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w=!1,de(!0),n=y().CancelToken.source(),e.next=5,y().post("".concat("http://localhost:8000/web","/users-password-reset"),{userId:j}).then((function(e){console.log(e),200===e.status?C.ZP.success(e.data):C.ZP.error(e.data)})).catch((function(e){w||(403===e.request.status?(localStorage.removeItem("userDetail"),localStorage.removeItem("userToken"),localStorage.removeItem("activeSubscription"),i.replace("/login"),i.go(0)):C.ZP.error(e))})).finally((function(){return ae(!1),de(!1),function(){w=!0,n.cancel("Cancelling in cleanup")}}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return z?(0,D.jsx)(l.Z,{style:{paddingTop:"50%",backgroundColor:"white"},children:(0,D.jsx)(I.Z,{isPageLoading:T})}):T?(0,D.jsx)(l.Z,{style:{top:"50%"},children:(0,D.jsx)(I.Z,{isPageLoading:T})}):(0,D.jsxs)(N.Fragment,{children:["Admin"!==(null===(Ze=JSON.parse(localStorage.getItem("userDetail")))||void 0===Ze||null===(je=Ze.profile)||void 0===je?void 0:je.name)||e.hideButtons?(0,D.jsx)("span",{}):(0,D.jsx)(l.Z,{component:"span",className:n.hideButtons,children:(0,D.jsxs)(d.Z,{container:!0,spacing:5,children:[(0,D.jsx)(d.Z,{xs:6,md:6,justifyContent:"flex-end",className:n.gridElement,children:(0,D.jsx)(o.Z,{variant:"contained",size:"medium",onClick:function(){M?Le():B(!M)},children:M?"Save":"Edit"})}),(0,D.jsxs)(d.Z,{xs:6,md:6,justifyContent:"flex-start",className:n.gridElement,children:[(0,D.jsx)(o.Z,{variant:"contained",size:"medium",disabled:!M,onClick:function(){B(!1),Ee()},children:"Cancel"}),(0,D.jsx)(o.Z,{color:"secondary",size:"medium",style:{left:"50%"},onClick:function(){ae(!0)},children:"Reset Password"})]})]})}),(0,D.jsx)(c.Z,{className:n.header,children:"User :"}),(0,D.jsx)(u.Z,{style:{paddingTop:30,backgroundColor:"white",paddingLeft:45},children:(0,D.jsxs)(d.Z,{container:!0,spacing:5,className:n.grid,children:[(0,D.jsxs)(d.Z,{xs:12,md:6,className:n.gridElement,children:[(0,D.jsx)(c.Z,{className:n.label,children:"Name :"}),(0,D.jsx)(p.Z,{style:{flex:1},InputProps:{readOnly:!M,disableUnderline:!M,className:n.inputDesign},helperText:W.includes("name")?"Name is required":"",error:W.includes("name"),onFocus:function(){J(W.filter((function(e){return"name"!==e})))},value:G.name,id:"name",onChange:function(e){K((0,s.Z)((0,s.Z)({},G),{},{name:e.target.value}))},variant:"standard"})]}),(0,D.jsxs)(d.Z,{xs:12,md:6,className:n.gridElement,children:[(0,D.jsx)(c.Z,{className:n.label,children:"Active :"}),(0,D.jsx)(m.Z,{style:{bottom:"9px"},disabled:!M,InputProps:{readOnly:!M,disableUnderline:!M,className:n.inputDesign},checked:Boolean(G.active),id:"active",onClick:function(e){K((0,s.Z)((0,s.Z)({},G),{},{active:e.target.checked}))},variant:"standard"})]}),(0,D.jsxs)(d.Z,{xs:12,md:6,className:n.gridElement,children:[(0,D.jsx)(c.Z,{className:n.label,children:"Email :"}),(0,D.jsx)(p.Z,{style:{flex:1},InputProps:{readOnly:!M,disableUnderline:!M,className:n.inputDesign},helperText:W.includes("email")?"Email is required":W.includes("emailInvalid")?"Email is invalid":"",error:W.includes("email")||W.includes("emailInvalid"),onFocus:function(){J(W.filter((function(e){return!e.includes("email")})))},value:G.email,id:"email",onChange:function(e){K((0,s.Z)((0,s.Z)({},G),{},{email:e.target.value}))},"aria-describedby":"component-error-text",variant:"standard"})]}),(0,D.jsxs)(d.Z,{xs:12,md:6,className:n.gridElement,children:[(0,D.jsx)(c.Z,{className:n.label,children:"Phone :"}),(0,D.jsx)(p.Z,{style:{flex:1},InputProps:{readOnly:!M,disableUnderline:!M,className:n.inputDesign},value:G.phone1,id:"phone",helperText:W.includes("phone")?"Phone Number is required":W.includes("phoneInvalid")?"Phone Number is invalid":"",error:W.includes("phone")||W.includes("phoneInvalid"),onFocus:function(){J(W.filter((function(e){return!e.includes("phone")})))},onChange:function(e){K((0,s.Z)((0,s.Z)({},G),{},{phone1:e.target.value}))},"aria-describedby":"component-error-text",variant:"standard"})]}),(0,D.jsxs)(d.Z,{xs:12,md:6,className:n.gridElement,children:[(0,D.jsx)(c.Z,{className:n.label,children:"Profile :"}),(0,D.jsx)(p.Z,{id:"profile",style:{flex:1},select:M,value:M?null===(be=$.find((function(e){var n;return e._id===(null===(n=G.profile)||void 0===n?void 0:n._id)})))||void 0===be?void 0:be._id:null===(ye=$.find((function(e){var n;return e._id===(null===(n=G.profile)||void 0===n?void 0:n._id)})))||void 0===ye?void 0:ye.name,onChange:function(e){K((0,s.Z)((0,s.Z)({},G),{},{profile:$.find((function(n){return n._id===e.target.value}))}))},variant:"standard",InputProps:{readOnly:!M||"Student"===(null===(Ce=$.find((function(e){var n;return e._id===(null===(n=G.profile)||void 0===n?void 0:n._id)})))||void 0===Ce?void 0:Ce.name),disableUnderline:!M,className:n.inputDesign},children:$.map((function(e){return(0,D.jsx)(h.Z,{classes:{root:n.profileSelect},value:e._id,children:e.name},e._id)}))})]}),(0,D.jsxs)(d.Z,{xs:12,md:6,className:n.gridElement,children:[(0,D.jsx)(c.Z,{style:{paddingRight:3},className:n.label,children:"Profile Photo :"}),(0,D.jsx)(S.rU,{children:"View"})]})]})}),(0,D.jsx)(c.Z,{className:n.header,children:"Address :"}),(0,D.jsx)(u.Z,{style:{paddingTop:30,backgroundColor:"white",paddingLeft:45},children:(0,D.jsxs)(d.Z,{container:!0,spacing:5,className:n.grid,children:[(0,D.jsxs)(d.Z,{xs:12,md:6,className:n.gridElement,children:[(0,D.jsx)(c.Z,{className:[n.label,n.addressLine],children:"Address Line 1 :"}),(0,D.jsx)(p.Z,{style:{flex:1},InputProps:{readOnly:!M,disableUnderline:!M,className:n.inputDesign},value:null===(Ne=G.address)||void 0===Ne?void 0:Ne.addressLine1,id:"addressLine1",helperText:W.includes("addrLine1")?"Address Line 1 is required":"",onFocus:function(){J(W.filter((function(e){return"addrLine1"!==e})))},error:W.includes("addrLine1"),onChange:function(e){!function(e){var n=G.address;n.addressLine1=e.target.value,K((0,s.Z)((0,s.Z)({},G),{},{address:n}))}(e)},variant:"standard"})]}),(0,D.jsxs)(d.Z,{xs:12,md:6,className:n.gridElement,children:[(0,D.jsx)(c.Z,{className:[n.label,n.addressLine],children:"Address Line 2 :"}),(0,D.jsx)(p.Z,{style:{flex:1},InputProps:{readOnly:!M,disableUnderline:!M,className:n.inputDesign},value:null===(Se=G.address)||void 0===Se?void 0:Se.addressLine2,id:"addressLine2",onChange:function(e){!function(e){var n=G.address;n.addressLine2=e.target.value,K((0,s.Z)((0,s.Z)({},G),{},{address:n}))}(e)},variant:"standard"})]}),(0,D.jsxs)(d.Z,{xs:12,md:6,className:n.gridElement,children:[(0,D.jsx)(c.Z,{className:n.label,children:"City :"}),(0,D.jsx)(p.Z,{style:{flex:1},InputProps:{readOnly:!M,disableUnderline:!M,className:n.inputDesign},value:null===(ke=G.address)||void 0===ke?void 0:ke.city,id:"city",helperText:W.includes("city")?"City is required":"",error:W.includes("city"),onFocus:function(){J(W.filter((function(e){return"city"!==e})))},onChange:function(e){!function(e){var n=G.address;n.city=e.target.value,K((0,s.Z)((0,s.Z)({},G),{},{address:n}))}(e)},variant:"standard"})]}),(0,D.jsxs)(d.Z,{xs:12,md:6,className:n.gridElement,children:[(0,D.jsx)(c.Z,{className:n.label,children:"District :"}),(0,D.jsx)(p.Z,{style:{flex:1},InputProps:{readOnly:!M,disableUnderline:!M,className:n.inputDesign},value:null===(Ie=G.address)||void 0===Ie?void 0:Ie.district,helperText:W.includes("district")?"District is required":"",error:W.includes("district"),onFocus:function(){J(W.filter((function(e){return"district"!==e})))},id:"district",onChange:function(e){!function(e){var n=G.address;n.district=e.target.value,K((0,s.Z)((0,s.Z)({},G),{},{address:n}))}(e)},variant:"standard"})]}),(0,D.jsxs)(d.Z,{xs:12,md:6,className:n.gridElement,children:[(0,D.jsx)(c.Z,{className:n.label,children:"State :"}),(0,D.jsx)(p.Z,{style:{flex:1},InputProps:{readOnly:!M,disableUnderline:!M,className:n.inputDesign},value:null===(we=G.address)||void 0===we?void 0:we.state,id:"state",helperText:W.includes("state")?"State is required":"",error:W.includes("state"),onFocus:function(){J(W.filter((function(e){return"state"!==e})))},onChange:function(e){!function(e){var n=G.address;n.state=e.target.value,K((0,s.Z)((0,s.Z)({},G),{},{address:n}))}(e)},variant:"standard"})]}),(0,D.jsxs)(d.Z,{xs:12,md:6,className:n.gridElement,children:[(0,D.jsx)(c.Z,{className:n.label,children:"Country :"}),(0,D.jsx)(p.Z,{style:{flex:1},InputProps:{readOnly:!M,disableUnderline:!M,className:n.inputDesign},value:null===(Pe=G.address)||void 0===Pe?void 0:Pe.country,id:"country",helperText:W.includes("country")?"Country is required":"",error:W.includes("country"),onFocus:function(){J(W.filter((function(e){return"country"!==e})))},onChange:function(e){!function(e){var n=G.address;n.country=e.target.value,K((0,s.Z)((0,s.Z)({},G),{},{address:n}))}(e)},variant:"standard"})]}),(0,D.jsxs)(d.Z,{xs:12,md:6,className:n.gridElement,children:[(0,D.jsx)(c.Z,{className:n.label,children:"PIN Code :"}),(0,D.jsx)(p.Z,{style:{flex:1},InputProps:{readOnly:!M,disableUnderline:!M,className:n.inputDesign},value:null===(De=G.address)||void 0===De?void 0:De.zipCode,id:"zipCode",helperText:W.includes("pinCode")?"Pin Code is required":"",error:W.includes("pinCode"),onFocus:function(){J(W.filter((function(e){return"pinCode"!==e})))},onChange:function(e){!function(e){var n=G.address;n.zipCode=e.target.value,K((0,s.Z)((0,s.Z)({},G),{},{address:n}))}(e)},variant:"standard"})]})]})}),(0,D.jsx)(C.x7,{}),(0,D.jsxs)(x.Z,{open:se,onClose:function(){ae(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[le&&(0,D.jsx)(l.Z,{sx:{width:"100%"},children:(0,D.jsx)(b.Z,{color:"inherit"})}),(0,D.jsx)(f.Z,{id:"alert-dialog-title",children:"Reset ".concat(G.name,"'s password?")}),(0,D.jsx)(v.Z,{children:(0,D.jsxs)(g.Z,{id:"alert-dialog-description",children:["Password reset request will be sent to ",G.name,"'s email."]})}),(0,D.jsxs)(Z.Z,{children:[(0,D.jsx)(o.Z,{disabled:le,onClick:function(){ae(!1)},children:"Cancel"}),(0,D.jsx)(o.Z,{disabled:le,onClick:Oe,autoFocus:!0,children:"Okay!"})]})]}),(0,D.jsxs)(x.Z,{open:ue,onClose:function(){},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,D.jsx)(f.Z,{id:"alert-dialog-title",children:"Authentication is required"}),(0,D.jsx)(v.Z,{children:(0,D.jsxs)(g.Z,{id:"alert-dialog-description",children:["Updating ",G.name,"'s email needs re-authentication. An email will be sent to the user."]})}),(0,D.jsxs)(Z.Z,{children:[(0,D.jsx)(o.Z,{disabled:le,onClick:function(){pe(!1)},children:"Cancel"}),(0,D.jsx)(o.Z,{onClick:Te,autoFocus:!0,children:"Okay!"})]})]})]})}}}]);
//# sourceMappingURL=2103.4383f87d.chunk.js.map