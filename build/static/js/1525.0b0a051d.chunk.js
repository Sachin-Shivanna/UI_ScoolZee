"use strict";(self.webpackChunkscoolzee=self.webpackChunkscoolzee||[]).push([[1525],{9726:function(e,n,t){t.d(n,{Z:function(){return v}});var i=t(2791),l=t(8302),o=t(3712),a=t(1971),r=t(6869),d=t(1889),s=t(4942),c=(0,t(8596).Z)((function(e){return{label:(0,s.Z)({fontSize:"1rem",fontFamily:["Roboto","Helvetica","Arial","sans-serif"],fontWeight:"400",lineHeight:"1.5",letterSpacing:"0.00938em",color:e.palette.grey[700],"& .MuiTypography-body1":{fontSize:"1.3rem !important"}},e.breakpoints.down("sm"),{fontSize:"1rem !important",padding:"7px 10px 0px 7px","& .MuiTypography-body1":{fontSize:"1rem !important"}}),header:{backgroundColor:"#101F33",padding:"5px",color:e.palette.common.white,marginTop:"10px",marginBottom:"10px"}}})),u=t(184),v=function(e){var n,t,s,v,p=c(),f=function(e){var n=e.getDate(),t=e.getMonth()+1,i=e.getFullYear(),l=e.getHours(),o=e.getMinutes(),a=l>=12?"pm":"am";return n+"/"+t+"/"+i+","+(l=(l%=12)||12)+":"+(o=o<10?"0"+o:o)+" "+a};return(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)(l.Z,{className:p.header,children:"Audit Info :"}),(0,u.jsx)(o.Z,{style:{paddingTop:30,backgroundColor:"white"},children:(0,u.jsxs)(d.ZP,{container:!0,spacing:4,children:[(0,u.jsx)(d.ZP,{item:!0,xs:6,style:{paddingTop:0},children:(0,u.jsxs)(a.Z,{style:{marginBottom:20},children:[(0,u.jsx)(l.Z,{className:p.label,children:"Created By :"}),(0,u.jsx)(r.Z,{style:{flex:1},fullWidth:!0,InputProps:{readOnly:!0,disableUnderline:!0},value:"".concat(null===e||void 0===e||null===(n=e.record)||void 0===n||null===(t=n.createdBy)||void 0===t?void 0:t.name," ").concat(f(new Date(e.record.createdAt)))||"",id:"last-modified-by",variant:"standard"})]})}),(0,u.jsx)(d.ZP,{item:!0,xs:6,style:{paddingTop:0},children:(0,u.jsxs)(a.Z,{style:{marginBottom:20},children:[(0,u.jsx)(l.Z,{className:p.label,children:"Last Modified By :"}),(0,u.jsx)(r.Z,{style:{flex:1},fullWidth:!0,InputProps:{readOnly:!0,disableUnderline:!0},value:"".concat(null===e||void 0===e||null===(s=e.record)||void 0===s||null===(v=s.modifiedBy)||void 0===v?void 0:v.name," ").concat(f(new Date(e.record.updatedAt)))||"",id:"last-modified-by",variant:"standard"})]})})]})})]})}},1525:function(e,n,t){t.r(n),t.d(n,{default:function(){return ae}});var i=t(4165),l=t(5861),o=t(885),a=t(2791),r=t(4569),d=t.n(r),s=t(4554),c=t(3896),u=t(3449),v=t(7283),p=t(9271),f=t(4144),h=t(7904),m=t(1413),g=t(2982),x=t(1971),Z=t(8302),y=t(3712),j=t(6869),b=t(6151),C=t(1889),S=t(6140),k=t(2740),w=t(1747),T=t(703),I=t(9836),P=t(3382),E=t(8745),D=t(9281),N=t(6890),O=t(3033),W=t(5855),B=t(9174),_=t(5574),A=t(7123),q=t(9157),F=t(1691),U=t(5661),R=t(792),z=t(5048),M=t(1023),L=t(2184),J=t(3081),H=t(6135),V=t(6513),Y=t(9365),G=t(3341),K=t(750),Q=t(184),X=function(e){var n=(0,h.y)(),t=(0,a.useState)("users"),i=(0,o.Z)(t,2),l=i[0],r=i[1],d=a.useState(!1),s=(0,o.Z)(d,2),c=s[0],u=s[1],v=(0,a.useState)([]),p=(0,o.Z)(v,2),f=p[0],y=p[1],b=a.useState([]),S=(0,o.Z)(b,2),w=S[0],T=S[1];(0,a.useEffect)((function(){y((0,g.Z)(e.allActiveUsers))}),[]),(0,a.useEffect)((function(){T([]),"institution"===l&&I(f)}),[l]);var I=function(e){var n=[];e.forEach((function(e){var t,i;(c&&"Caregiver"===(null===(t=e.profile)||void 0===t?void 0:t.name)||"Caregiver"!==(null===(i=e.profile)||void 0===i?void 0:i.name))&&n.push({userId:e._id,userEmail:e.email,userPhone:e.phone1,userProfile:e.profile,userName:e.name})})),T([].concat(n))};return(0,Q.jsxs)(a.Fragment,{children:[(0,Q.jsxs)(x.Z,{style:{marginBottom:20},children:[(0,Q.jsx)(Z.Z,{style:{paddingTop:10,paddingRight:10},className:n.label,children:"Audience Category :"}),(0,Q.jsx)(k.Z,{style:{minWidth:250},disabled:!1,options:H.k||[],getOptionLabel:function(e){return e.label||""},value:H.k.find((function(e){return e.value===l})),isOptionEqualToValue:function(e,n){return(null===e||void 0===e?void 0:e.value)===n},onChange:function(e){var n,t,i;r(null===(n=H.k[null===(t=e.target)||void 0===t||null===(i=t.dataset)||void 0===i?void 0:i.optionIndex])||void 0===n?void 0:n.value)},id:"disable-close-on-select",renderInput:function(e){return(0,Q.jsx)(j.Z,(0,m.Z)((0,m.Z)({},e),{},{variant:"outlined",required:!0,fullWidth:!0,id:"event-type",placeholder:"audience"}))}}),"institution"===l&&(0,Q.jsx)(x.Z,{children:(0,Q.jsxs)(Z.Z,{children:[(0,Q.jsx)(B.Z,{checked:c,onChange:function(){u(!c)}}),(0,Q.jsx)("span",{children:"Include Caregivers"})]})})]}),""!==l&&"institution"!==l&&(0,Q.jsxs)(a.Fragment,{children:[(0,Q.jsx)(Z.Z,{style:{marginTop:0},className:n.header,children:"Audience Detail :"}),"users"===l&&(0,Q.jsx)(Y.Z,{selectedUsers:function(e){T((0,g.Z)(e))}}),"classes"===l&&(0,Q.jsx)(G.Z,{selectedUsers:function(e){T((0,g.Z)(e))}}),"profile"===l&&(0,Q.jsx)(K.Z,{selectedUsers:function(e){T((0,g.Z)(e))}})]}),(0,Q.jsxs)(C.ZP,{container:!0,spacing:5,style:{position:"relative"},children:[(0,Q.jsx)(C.ZP,{xs:6,md:6,justifyContent:"flex-end",style:{maxWidth:"46%"},className:n.gridElement,children:(0,Q.jsx)(V.Z,{variant:"contained",size:"medium",disabled:0===(null===w||void 0===w?void 0:w.length),style:{marginRight:3,position:"relative",top:"80%"},onClick:function(){e.onAddAudience(w)},children:"Add"})}),(0,Q.jsx)(C.ZP,{xs:6,md:6,justifyContent:"flex-start",style:{maxWidth:"46%"},className:n.gridElement,children:(0,Q.jsx)(V.Z,{variant:"contained",size:"medium",style:{marginLeft:3,position:"relative",top:"80%"},onClick:function(){e.onCancel()},children:"Cancel"})})]})]})},$=t(9726),ee=function(e){var n=(0,h.y)(),t=(0,p.k6)(),r=!1,s=a.useState(0),c=(0,o.Z)(s,2),u=c[0],v=c[1],f=a.useState(10),H=(0,o.Z)(f,2),V=H[0],Y=H[1],G=a.useState(!1),K=(0,o.Z)(G,2),ee=K[0],ne=K[1],te=a.useState(!1),ie=(0,o.Z)(te,2),le=ie[0],oe=ie[1],ae=a.useState(!1),re=(0,o.Z)(ae,2),de=re[0],se=re[1],ce=a.useState([]),ue=(0,o.Z)(ce,2),ve=ue[0],pe=ue[1],fe=a.useState({}),he=(0,o.Z)(fe,2),me=he[0],ge=he[1],xe=a.useState([]),Ze=(0,o.Z)(xe,2),ye=Ze[0],je=Ze[1],be=a.useState([]),Ce=(0,o.Z)(be,2),Se=Ce[0],ke=Ce[1],we=a.useState(!1),Te=(0,o.Z)(we,2),Ie=Te[0],Pe=Te[1],Ee=a.useState(!1),De=(0,o.Z)(Ee,2),Ne=De[0],Oe=De[1],We=a.useState(!1),Be=(0,o.Z)(We,2),_e=Be[0],Ae=Be[1];(0,a.useEffect)((function(){console.log(e.savedEvent),JSON.stringify(e.savedEvent)!==JSON.stringify({})&&(ge(e.savedEvent),Qe())}),[]);var qe,Fe,Ue,Re,ze,Me,Le,Je,He,Ve,Ye,Ge,Ke,Qe=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(!0),r=!1,n=d().CancelToken.source(),e.next=5,d().get("".concat("http://localhost:8000/web","/active-users-info")).then((function(e){console.log(e.data),je(e.data)})).catch((function(e){r||403===e.request.status&&(localStorage.removeItem("userDetail"),localStorage.removeItem("userToken"),localStorage.removeItem("activeSubscription"),t.replace("/login"),t.go(0)),oe(!0)})).finally((function(){return ne(!1),function(){r=!0,n.cancel("Cancelling in cleanup")}}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,ne(!0),n=d().CancelToken.source(),e.next=5,d().post("".concat("http://localhost:8000/web","/update-event"),{updatedEvent:me}).then((function(e){console.log(e),200===e.status?se(!de):S.ZP.error(e.error)})).catch((function(e){r||(403===e.request.status?(localStorage.removeItem("userDetail"),localStorage.removeItem("userToken"),localStorage.removeItem("activeSubscription"),t.replace("/login"),t.go(0)):console.log(e.request)),oe(!0)})).finally((function(){return ne(!1),function(){r=!0,n.cancel("Cancelling in cleanup")}}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$e=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ae(!1),ne(!0),r=!1,n=d().CancelToken.source(),e.next=6,d().post("".concat("http://localhost:8000/web","/delete-event"),{eventId:null===me||void 0===me?void 0:me._id,attachment:null===me||void 0===me?void 0:me.attachmant}).then((function(e){200===e.status&&(ne(!1),console.log("Returned"),t.goBack())})).catch((function(e){r||(403===e.request.status?(localStorage.removeItem("userDetail"),localStorage.removeItem("userToken"),localStorage.removeItem("activeSubscription"),t.replace("/login"),t.go(0)):S.ZP.error("Falied!"))})).finally((function(){return ne(!1),function(){r=!0,n.cancel("Cancelling in cleanup")}}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),en=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(!0),r=!1,n=d().CancelToken.source(),e.next=5,d().post("".concat("http://localhost:8000/web","/send-event-remainder"),{eventId:me._id}).then((function(e){200===e.status&&(ne(!1),console.log("Returned"))})).catch((function(e){r||(403===e.request.status?(localStorage.removeItem("userDetail"),localStorage.removeItem("userToken"),localStorage.removeItem("activeSubscription"),t.replace("/login"),t.go(0)):S.ZP.error("Falied!"))})).finally((function(){return ne(!1),function(){r=!0,n.cancel("Cancelling in cleanup")}}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nn=function(){var e,n=!0,t=[];return null!==me.title&&""!==me.title||(t.push.apply(t,t.concat(["title"])),n=!1),""!==me.type&&"undefined"!==typeof me.type||(t.push.apply(t,t.concat(["type"])),n=!1),""!==me.owner&&"undefined"!==typeof me.owner||(t.push.apply(t,t.concat(["owner"])),n=!1),""!==me.notificationMode&&"undefined"!==typeof me.notificationMode||(t.push.apply(t,t.concat(["notificationMode"])),n=!1),0===(null===(e=me.audiance)||void 0===e?void 0:e.length)&&(t.push.apply(t,t.concat(["selectedUsers"])),n=!1,S.ZP.error("Please select the Audience")),new Date(me.startDateTime)<new Date&&(n=!1,S.ZP.error("Event must be timed in future")),new Date(me.startDateTime)>new Date(me.endDateTime)&&(n=!1,S.ZP.error("Event end time must be greater than start date")),n||pe(t),n};return le?(0,Q.jsx)(x.Z,{style:{paddingTop:"50%",backgroundColor:"white"},children:(0,Q.jsx)(z.Z,{isPageLoading:ee})}):ee?(0,Q.jsx)(x.Z,{style:{top:"50%"},children:(0,Q.jsx)(z.Z,{isPageLoading:ee})}):(0,Q.jsxs)(a.Fragment,{children:[JSON.stringify(me)!==JSON.stringify({})&&(0,Q.jsxs)("span",{children:["Admin"===(null===(qe=JSON.parse(localStorage.getItem("userDetail")))||void 0===qe||null===(Fe=qe.profile)||void 0===Fe?void 0:Fe.name)||JSON.parse(localStorage.getItem("userDetail"))._id===(null===me||void 0===me||null===(Ue=me.owner)||void 0===Ue?void 0:Ue._id)?(0,Q.jsx)(x.Z,{component:"span",className:n.hideButtons,children:(0,Q.jsxs)(C.ZP,{container:!0,spacing:5,children:[(0,Q.jsxs)(C.ZP,{xs:6,md:6,justifyContent:"flex-end",style:{maxWidth:"46%",paddingTop:10,marginBottom:"1.5%"},className:n.gridElement,children:[(0,Q.jsx)(b.Z,{variant:"contained",size:"medium",style:{marginRight:3},color:"inherit",onClick:function(){de?!0===nn()&&Xe():se(!de)},children:de?"Save":"Edit"}),(0,Q.jsx)(b.Z,{variant:"contained",size:"medium",style:{marginLeft:3},color:"inherit",onClick:function(){de?Pe(!0):t.goBack()},children:"Cancel"})]}),(0,Q.jsxs)(C.ZP,{xs:6,md:6,justifyContent:"flex-start",style:{maxWidth:"46%",paddingTop:10,marginBottom:"1.5%"},className:n.gridElement,children:[(0,Q.jsx)(b.Z,{variant:"outlined",size:"medium",color:"error",style:{marginRight:3},onClick:function(){Ae(!0)},children:"Delete"}),(0,Q.jsx)(b.Z,{variant:"contained",size:"medium",color:"success",disabled:de,style:{marginLeft:3},onClick:function(){en()},children:"Send Remainder"})]})]})}):(0,Q.jsx)("span",{}),(0,Q.jsx)(Z.Z,{className:n.header,children:"Event :"}),(0,Q.jsx)(y.Z,{style:{paddingTop:30,backgroundColor:"white"},children:(0,Q.jsxs)(C.ZP,{container:!0,spacing:4,children:[(0,Q.jsxs)(C.ZP,{item:!0,xs:6,children:[(0,Q.jsxs)(x.Z,{style:{marginBottom:20},children:[(0,Q.jsx)(Z.Z,{className:n.label,children:"Title :"}),(0,Q.jsx)(j.Z,{style:{flex:1},fullWidth:!0,InputProps:{readOnly:!de,disableUnderline:!de},placeholder:"Event Title",helperText:ve.includes("title")?"Title is required":"",error:ve.includes("title"),onFocus:function(){pe(ve.filter((function(e){return"title"!==e})))},value:me.title||"",id:"title",onChange:function(e){ge((0,m.Z)((0,m.Z)({},me),{},{title:e.target.value}))},variant:"standard"})]}),(0,Q.jsxs)(x.Z,{style:{marginBottom:20},children:[(0,Q.jsx)(Z.Z,{className:n.label,children:"Description :"}),(0,Q.jsx)(w.Z,{"aria-label":"minimum height",minRows:3,readOnly:!de,InputProps:{readOnly:!de,disableUnderline:!de},placeholder:"Event Description",onChange:function(e){ge((0,m.Z)((0,m.Z)({},me),{},{description:e.target.value}))},style:{minWidth:"100%",maxWidth:"100%",minHeight:143,height:143,border:de?"":"none"},value:me.description||""})]}),(0,Q.jsxs)(x.Z,{style:{marginBottom:20},children:[(0,Q.jsx)(Z.Z,{style:{paddingTop:10,paddingRight:10},className:n.label,children:"Type :"}),de&&(0,Q.jsx)(k.Z,{style:{minWidth:250},disabled:!1,options:M.u||[],getOptionLabel:function(e){return e.label||""},value:M.u.find((function(e){return e.value===me.type})),isOptionEqualToValue:function(e,n){return(null===e||void 0===e?void 0:e.value)===n},onChange:function(e){var n,t,i;ge((0,m.Z)((0,m.Z)({},me),{},{type:null===(n=M.u[null===(t=e.target)||void 0===t||null===(i=t.dataset)||void 0===i?void 0:i.optionIndex])||void 0===n?void 0:n.value}))},id:"disable-close-on-select",renderInput:function(e){return(0,Q.jsx)(j.Z,(0,m.Z)((0,m.Z)({},e),{},{variant:"outlined",style:{border:de?"":"none"},required:!0,helperText:ve.includes("type")?"Event Type is required":"",error:ve.includes("type"),onFocus:function(){pe(ve.filter((function(e){return"type"!==e})))},fullWidth:!0,id:"event-type",placeholder:"Type"}))}}),!de&&(0,Q.jsx)(j.Z,{style:{flex:1},fullWidth:!0,InputProps:{readOnly:!de,disableUnderline:!de},placeholder:"Event Title",value:(null===(Re=M.u.find((function(e){return e.value===me.type})))||void 0===Re?void 0:Re.label)||"",id:"type",onChange:function(e){},variant:"standard"})]}),(0,Q.jsxs)(x.Z,{style:{marginBottom:20},children:[(0,Q.jsx)(Z.Z,{style:{paddingTop:10,paddingRight:10},className:n.label,children:"Notification Mode :"}),de&&(0,Q.jsx)(k.Z,{style:{minWidth:250},disabled:!1,options:L.a||[],getOptionLabel:function(e){return e.label||""},value:L.a.find((function(e){return e.value===me.notificationMode})),isOptionEqualToValue:function(e,n){return(null===e||void 0===e?void 0:e.value)===n},onChange:function(e){var n,t,i;ge((0,m.Z)((0,m.Z)({},me),{},{notificationMode:null===(n=L.a[null===(t=e.target)||void 0===t||null===(i=t.dataset)||void 0===i?void 0:i.optionIndex])||void 0===n?void 0:n.value}))},id:"disable-close-on-select",renderInput:function(e){return(0,Q.jsx)(j.Z,(0,m.Z)((0,m.Z)({},e),{},{variant:"outlined",style:{border:de?"":"none"},required:!0,helperText:ve.includes("notificationMode")?"Notification Mode is required":"",error:ve.includes("notificationMode"),onFocus:function(){pe(ve.filter((function(e){return"notificationMode"!==e})))},fullWidth:!0,id:"notification-mode",placeholder:"Notification Mode"}))}}),!de&&(0,Q.jsx)(j.Z,{style:{flex:1},fullWidth:!0,InputProps:{readOnly:!de,disableUnderline:!de},placeholder:"Event Title",value:(null===(ze=L.a.find((function(e){return e.value===me.notificationMode})))||void 0===ze?void 0:ze.label)||"",id:"notification-mode",onChange:function(e){},variant:"standard"})]})]}),(0,Q.jsxs)(C.ZP,{item:!0,xs:6,children:[(0,Q.jsxs)(x.Z,{style:{marginBottom:20},children:[(0,Q.jsx)(Z.Z,{style:{paddingTop:10,paddingRight:10},className:n.label,children:"Owner :"}),de&&(0,Q.jsx)(k.Z,{style:{minWidth:250},disabled:!1,fullWidth:!0,options:ye.filter((function(e){var n,t;return"Admin"===(null===(n=e.profile)||void 0===n?void 0:n.name)||"Faculty"===(null===(t=e.profile)||void 0===t?void 0:t.name)}))||[],getOptionLabel:function(e){return e.name||""},value:ye.find((function(e){var n;return e._id===(null===(n=me.owner)||void 0===n?void 0:n._id)})),isOptionEqualToValue:function(e,n){return(null===e||void 0===e?void 0:e._id)===n},onChange:function(e){var n,t;ge((0,m.Z)((0,m.Z)({},me),{},{owner:ye[null===(n=e.target)||void 0===n||null===(t=n.dataset)||void 0===t?void 0:t.optionIndex]}))},id:"disable-close-on-select",renderInput:function(e){return(0,Q.jsx)(j.Z,(0,m.Z)((0,m.Z)({},e),{},{variant:"outlined",required:!0,helperText:ve.includes("owner")?"Owner is required":"",error:ve.includes("owner"),onFocus:function(){pe(ve.filter((function(e){return"owner"!==e})))},fullWidth:!0,id:"event-type",placeholder:"Owner"}))}}),!de&&(0,Q.jsx)(j.Z,{style:{flex:1},fullWidth:!0,InputProps:{readOnly:!de,disableUnderline:!de},placeholder:"Event Title",value:(null===(Me=ye.find((function(e){var n;return e._id===(null===(n=me.owner)||void 0===n?void 0:n._id)})))||void 0===Me?void 0:Me.name)||"",id:"notification-mode",onChange:function(e){},variant:"standard"})]}),(0,Q.jsxs)(x.Z,{style:{marginBottom:35},children:[(0,Q.jsx)(Z.Z,{style:{paddingTop:10,paddingRight:10},className:n.label,children:"Start Date/Time :"}),(0,Q.jsx)(j.Z,{id:"datetime-local",type:"datetime-local",defaultValue:"2017-05-24T10:30",value:null===(Le=new Date(me.startDateTime))||void 0===Le||null===(Je=Le.toISOString())||void 0===Je?void 0:Je.slice(0,16),onChange:function(e){ge((0,m.Z)((0,m.Z)({},me),{},{startDateTime:e.target.value}))},sx:{minWidth:250},InputLabelProps:{shrink:!0},InputProps:{readOnly:!de,disableUnderline:!de}})]}),(0,Q.jsxs)(x.Z,{style:{marginBottom:20},children:[(0,Q.jsx)(Z.Z,{style:{paddingTop:10,paddingRight:10},className:n.label,children:"End Date/Time :"}),(0,Q.jsx)(j.Z,{id:"datetime-local",type:"datetime-local",defaultValue:"2017-05-24T10:30",value:null===(He=new Date(me.endDateTime))||void 0===He||null===(Ve=He.toISOString())||void 0===Ve?void 0:Ve.slice(0,16),onChange:function(e){ge((0,m.Z)((0,m.Z)({},me),{},{endDateTime:e.target.value}))},sx:{minWidth:250},InputLabelProps:{shrink:!0},InputProps:{readOnly:!de,disableUnderline:!de}})]})]})]})}),(0,Q.jsx)(Z.Z,{className:n.header,children:"Audience Detail :"}),"Admin"===(null===(Ye=JSON.parse(localStorage.getItem("userDetail")))||void 0===Ye||null===(Ge=Ye.profile)||void 0===Ge?void 0:Ge.name)&&de?(0,Q.jsx)(x.Z,{component:"span",className:n.hideButtons,children:(0,Q.jsxs)(C.ZP,{container:!0,spacing:5,children:[(0,Q.jsx)(C.ZP,{xs:6,md:6,justifyContent:"flex-end",style:{maxWidth:"46%",paddingTop:10,marginTop:35,marginBottom:0},className:n.gridElement,children:(0,Q.jsx)(b.Z,{variant:"contained",disabled:!de||0===Se.length,size:"medium",style:{marginTop:6},onClick:function(){ge((0,m.Z)((0,m.Z)({},me),{},{audiance:null===me||void 0===me?void 0:me.audiance.filter((function(e){return Se.findIndex((function(n){return n===e._id}))<0}))})),ke([])},children:"Remove Audience"})}),(0,Q.jsx)(C.ZP,{xs:6,md:6,justifyContent:"flex-start",style:{maxWidth:"46%",paddingTop:10,marginTop:35,marginBottom:0},className:n.gridElement,children:(0,Q.jsx)(b.Z,{variant:"contained",style:{marginTop:6},size:"medium",onClick:function(){Oe(!0)},children:"Add Audience"})})]})}):(0,Q.jsx)("span",{}),(0,Q.jsx)(y.Z,{style:{paddingLeft:0,paddingRight:0},children:(0,Q.jsxs)(T.Z,{sx:{width:"100%",overflow:"hidden",marginTop:"10px"},children:[(0,Q.jsx)(D.Z,{sx:{maxHeight:"100vh"},children:(0,Q.jsxs)(I.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,Q.jsx)(N.Z,{children:(0,Q.jsxs)(W.Z,{children:[(0,Q.jsx)(h.Y,{align:"center",style:{minWidth:100},children:(0,Q.jsx)(B.Z,{style:{backgroundColor:"white"},disabled:!de,checked:(null===Se||void 0===Se?void 0:Se.length)===(null===me||void 0===me||null===(Ke=me.audiance)||void 0===Ke?void 0:Ke.length),onChange:function(){var e;(null===Se||void 0===Se?void 0:Se.length)===(null===me||void 0===me||null===(e=me.audiance)||void 0===e?void 0:e.length)?ke([]):ke((0,g.Z)(null===me||void 0===me?void 0:me.audiance.map((function(e){return e._id}))))}})},"select"),J.z.map((function(e){return"status"!==e.id&&"reset"!==e.id&&(0,Q.jsx)(h.Y,{align:"center",style:{minWidth:e.minWidth},children:e.label},e.id)}))]})}),(0,Q.jsx)(P.Z,{children:null===me||void 0===me?void 0:me.audiance.slice(u*V,u*V+V).map((function(e){return(0,Q.jsxs)(W.Z,{role:"checkbox",tabIndex:-1,children:[(0,Q.jsx)(E.Z,{align:"center",style:{minWidth:100},children:(0,Q.jsx)(B.Z,{style:{backgroundColor:"white"},disabled:!de,checked:(null===Se||void 0===Se?void 0:Se.findIndex((function(n){return n===e._id})))>=0,onChange:function(){(null===Se||void 0===Se?void 0:Se.findIndex((function(n){return n===e._id})))>=0?ke((0,g.Z)(Se.filter((function(n){return n!==e._id})))):ke([].concat((0,g.Z)(Se),[e._id]))}})},e._id),J.z.map((function(n){var t;return"status"!==(null===n||void 0===n?void 0:n.id)&&"reset"!==(null===n||void 0===n?void 0:n.id)&&(0,Q.jsx)(E.Z,{align:"center",children:"phone"===(null===n||void 0===n?void 0:n.id)?null===n||void 0===n?void 0:n.format(e.phone1):"email"===(null===n||void 0===n?void 0:n.id)?null===n||void 0===n?void 0:n.format(e.email):"name"===(null===n||void 0===n?void 0:n.id)?e.name:"profile"===(null===n||void 0===n?void 0:n.id)?null===(t=e.profile)||void 0===t?void 0:t.name:""},null===n||void 0===n?void 0:n.id)}))]},e._id)}))})]})}),(0,Q.jsx)(O.Z,{rowsPerPageOptions:[10,25,100],component:"div",count:null===me||void 0===me?void 0:me.audiance.length,rowsPerPage:V,page:u,onPageChange:function(e,n){v(n)},onRowsPerPageChange:function(e){Y(+e.target.value),v(0)}})]})}),(0,Q.jsx)($.Z,{record:me}),(0,Q.jsxs)(_.Z,{open:Ie,onClose:function(){Pe(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,Q.jsx)(U.Z,{id:"alert-dialog-title",children:"Confirm cancel ?"}),(0,Q.jsx)(q.Z,{children:(0,Q.jsx)(F.Z,{id:"alert-dialog-description",children:"All unsaved changes will be lost!"})}),(0,Q.jsxs)(A.Z,{children:[(0,Q.jsx)(b.Z,{onClick:function(){Pe(!1)},children:"Cancel"}),(0,Q.jsx)(b.Z,{onClick:function(){t.goBack()||window.close()},color:"error",children:"Okay!"})]})]}),(0,Q.jsxs)(_.Z,{open:_e,onClose:function(){Ae(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,Q.jsx)(U.Z,{id:"alert-dialog-title",children:"Delete event ?"}),(0,Q.jsx)(q.Z,{children:(0,Q.jsx)(F.Z,{id:"alert-dialog-description",children:"You are about to delete the event!"})}),(0,Q.jsxs)(A.Z,{children:[(0,Q.jsx)(b.Z,{onClick:function(){Ae(!1)},children:"Cancel"}),(0,Q.jsx)(b.Z,{onClick:function(){$e()},color:"error",children:"Okay!"})]})]}),(0,Q.jsx)(R.Z,{open:Ne,onClose:function(){Oe(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,Q.jsx)(x.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",bgcolor:"background.paper",p:4},children:(0,Q.jsx)(X,{onCancel:function(){Oe(!1)},onAddAudience:function(e){var n=[];null===e||void 0===e||e.forEach((function(e){var t;(null===me||void 0===me||null===(t=me.audiance)||void 0===t?void 0:t.findIndex((function(n){return n._id===e.userId})))<0&&n.push({_id:e.userId,name:e.userName,phone1:e.userPhone,email:e.userEmail,profile:e.userProfile})})),n.push.apply(n,(0,g.Z)(null===me||void 0===me?void 0:me.audiance)),ge((0,m.Z)((0,m.Z)({},me),{},{audiance:n})),Oe(!1)},allActiveUsers:ye})})})]}),(0,Q.jsx)(S.x7,{})]})},ne=t(7247),te=t(9013),ie=t(1288),le=t(8455),oe=function(e){var n,t,s,c,u,v,f,m,g,j,C,k,w,T,I,P,E=(0,p.k6)(),D=(0,h.y)(),N=!1,O=JSON.parse(localStorage.getItem("userDetail")),W="".concat("http://localhost:8000/web","/update-file"),B={headers:{"content-type":"multipart/form-data"}},R=a.useState(!1),M=(0,o.Z)(R,2),L=M[0],J=M[1],H=a.useState(!1),V=(0,o.Z)(H,2),Y=V[0],G=V[1],K=function(){var n=(0,l.Z)((0,i.Z)().mark((function n(){var t,l;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=d().CancelToken.source(),n.next=3,d().get("".concat("http://localhost:8000/web","/get-file"),{params:JSON.stringify(null===e||void 0===e||null===(t=e.savedEvent)||void 0===t?void 0:t.attachmant)}).then((function(n){var t,i,l,o,a="data:".concat(null===e||void 0===e||null===(t=e.savedEvent)||void 0===t||null===(i=t.attachmant)||void 0===i?void 0:i.mimetype,";base64,").concat(n.data),r=document.createElement("a"),d=null===e||void 0===e||null===(l=e.savedEvent)||void 0===l||null===(o=l.attachmant)||void 0===o?void 0:o.originalname;r.href=a,r.download=d,r.click()})).catch((function(e){var n;(console.log(e),N)||403===(null===(n=e.request)||void 0===n?void 0:n.status)&&(localStorage.removeItem("userDetail"),localStorage.removeItem("userToken"),localStorage.removeItem("activeSubscription"),E.replace("/login"),E.go(0))})).finally((function(){return function(){N=!0,l.cancel("Cancelling in cleanup")}}));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),X=function(){var n=(0,l.Z)((0,i.Z)().mark((function n(){var t,l,o;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return J(!1),G(!0),console.log("Entered"),N=!1,o=d().CancelToken.source(),n.next=7,d().post("".concat("http://localhost:8000/web","/delete-file"),{eventId:null===(t=e.savedEvent)||void 0===t?void 0:t._id,attachment:null===e||void 0===e||null===(l=e.savedEvent)||void 0===l?void 0:l.attachmant}).then((function(n){200===n.status&&(G(!1),console.log("Returned"),e.savedEvent.attachmant={})})).catch((function(e){N||(403===e.request.status?(localStorage.removeItem("userDetail"),localStorage.removeItem("userToken"),localStorage.removeItem("activeSubscription"),E.replace("/login"),E.go(0)):S.ZP.error(e.response.data))})).finally((function(){return G(!1),function(){N=!0,o.cancel("Cancelling in cleanup")}}));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Y?(0,Q.jsx)(x.Z,{style:{top:"50%"},children:(0,Q.jsx)(z.Z,{isPageLoading:Y})}):(0,Q.jsxs)(a.Fragment,{children:[(0,Q.jsx)(Z.Z,{className:D.header,children:"Attachment :"}),(0,Q.jsx)(y.Z,{style:{paddingTop:30,backgroundColor:"white"},children:(0,Q.jsx)(ie.Z,{container:!0,spacing:4,children:(0,Q.jsx)(ie.Z,{item:!0,xs:12,children:(0,Q.jsxs)(x.Z,{style:{marginBottom:20},children:[(0,Q.jsx)(le.Z,{onClick:function(){K()},underline:"always",style:{color:"inherit",cursor:"pointer"},children:null===e||void 0===e||null===(n=e.savedEvent)||void 0===n||null===(t=n.attachmant)||void 0===t?void 0:t.originalname}),(O._id===(null===e||void 0===e||null===(s=e.savedEvent)||void 0===s||null===(c=s.owner)||void 0===c?void 0:c._id)||"Admin"===(null===(u=O.profile)||void 0===u?void 0:u.name))&&(null===e||void 0===e||null===(v=e.savedEvent)||void 0===v||null===(f=v.attachmant)||void 0===f?void 0:f.originalname)&&(0,Q.jsxs)(b.Z,{variant:"contained",color:"inherit",onClick:function(){J(!0)},style:{float:"right"},children:[(0,Q.jsx)(ne.Z,{})," Delete"]}),(O._id===(null===e||void 0===e||null===(m=e.savedEvent)||void 0===m||null===(g=m.owner)||void 0===g?void 0:g._id)||"Admin"===(null===(j=O.profile)||void 0===j?void 0:j.name))&&!(null!==e&&void 0!==e&&null!==(C=e.savedEvent)&&void 0!==C&&null!==(k=C.attachmant)&&void 0!==k&&k.originalname)&&(0,Q.jsxs)(b.Z,{onClick:function(){document.getElementById("file-upoad").click()},variant:"contained",color:"inherit",style:{left:"42%"},children:[(0,Q.jsx)(te.Z,{})," Upload"]}),O._id===(null===e||void 0===e||null===(w=e.savedEvent)||void 0===w||null===(T=w.owner)||void 0===T?void 0:T._id)&&!(null!==e&&void 0!==e&&null!==(I=e.savedEvent)&&void 0!==I&&null!==(P=I.attachmant)&&void 0!==P&&P.originalname)&&(0,Q.jsx)("input",{type:"file",accept:"application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint, text/plain, application/pdf, image/*",onChange:function(n){!function(n){var t;if(console.log(n),G(!0),((null===n||void 0===n?void 0:n.size)/1048576).toFixed(2)>10)return S.ZP.error("File size can not be more than 10MB");var i=new FormData;i.append("file",n),i.append("eventId",null===(t=e.savedEvent)||void 0===t?void 0:t._id);var l=d().CancelToken.source();(0,r.post)(W,i,B).then((function(n){console.log(n),200===n.status?(console.log(n.data),e.onUpdateFile()):S.ZP.error("Update failed")})).catch((function(e){N||(403===e.request.status?(localStorage.removeItem("userDetail"),localStorage.removeItem("userToken"),localStorage.removeItem("activeSubscription"),E.replace("/login"),E.go(0)):S.ZP.error(e))})).finally((function(){return G(!1),function(){N=!0,l.cancel("Cancelling in cleanup")}}))}(n.target.files[0])},name:"file",id:"file-upoad",style:{display:"none"}})]})})})}),(0,Q.jsxs)(_.Z,{open:L,onClose:function(){J(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,Q.jsx)(U.Z,{id:"alert-dialog-title",children:"Delete the attachment?"}),(0,Q.jsx)(q.Z,{children:(0,Q.jsx)(F.Z,{id:"alert-dialog-description",children:"Attachment sent through email can not be reverted!"})}),(0,Q.jsxs)(A.Z,{children:[(0,Q.jsx)(b.Z,{onClick:function(){J(!1)},children:"Cancel"}),(0,Q.jsx)(b.Z,{onClick:function(){X()},color:"warning",children:"Okay!"})]})]}),(0,Q.jsx)(S.x7,{})]})},ae=function(){var e=(0,p.UO)().id,n=(0,p.k6)(),t=(0,h.y)(),r=!1,m=a.useState("1"),g=(0,o.Z)(m,2),x=g[0],Z=g[1],y=a.useState(!1),j=(0,o.Z)(y,2),b=j[0],C=j[1],S=a.useState({}),k=(0,o.Z)(S,2),w=k[0],T=k[1];(0,a.useEffect)((function(){I()}),[]),(0,a.useEffect)((function(){C(!0),setTimeout((function(){C(!1)}),0)}),[w]);var I=function(){var t=(0,l.Z)((0,i.Z)().mark((function t(){var l;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C(!0),r=!1,l=d().CancelToken.source(),t.next=5,d().get("".concat("http://localhost:8000/web","/event-details/").concat(e)).then((function(e){console.log(e.data),T(e.data)})).catch((function(e){r||403===e.request.status&&(localStorage.removeItem("userDetail"),localStorage.removeItem("userToken"),localStorage.removeItem("activeSubscription"),n.replace("/login"),n.go(0))})).finally((function(){return function(){r=!0,l.cancel("Cancelling in cleanup")}}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,Q.jsx)(s.Z,{sx:{width:"100%",typography:"body1"},children:(0,Q.jsxs)(u.ZP,{value:x,children:[(0,Q.jsx)(s.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,Q.jsxs)(v.Z,{variant:"scrollable",onChange:function(e,n){Z(n)},"aria-label":"lab API tabs example",children:[(0,Q.jsx)(c.Z,{label:"Details",value:"1"}),(0,Q.jsx)(c.Z,{label:"Related",value:"2"})]})}),!b&&(0,Q.jsx)(f.Z,{className:t.tabPanel,value:"1",children:(0,Q.jsx)(ee,{savedEvent:w})}),!b&&(0,Q.jsx)(f.Z,{className:t.tabPanel,value:"2",children:(0,Q.jsx)(oe,{onUpdateFile:I,savedEvent:w})})]})})}}}]);
//# sourceMappingURL=1525.0b0a051d.chunk.js.map